Для чего это нужно?
===================

Иногда мы получаем примерно такие `tex`-файлы

    Мы рассматриваем крмпактификацию счётного дискретного пространства $N$.
    Наибольшее внимание исследователей в теории бикомпактных расширений было уделено
    компактификации Стоуна--Чеха счётного дискретного пространства -- $\beta N$ или
    $\beta\omega$. История исследования этого пространства напрямую связана с
различением или классификацией точек нароста.

    Одним из первых встал вопрос о
    существовании в нём $p$-точек и не $p$-точек. То, что в $\beta\omega$ есть не
    $p$-точки --- очевидно. В 1956 году Волтер Рудин доказывает существование
    $p$-точек в предположении \emph{CH}. Далее удалось ослабить это требование до
    предположения \emph{AM}. Но попытки доказать «наивно» существование $p$-точек
    оканчивались неудачами. Позже, в 1978 г. Шелахом было доказано, что «наивно»
    этот факт доказать невозможно. Это обострило интерес к изучению точек, так или
    иначе близких к $p$-точкам.

Какая уж тут типографика, когда даже однобуквенные предлоги здесь не привяжешь, потому что редактор автоматически разрезал длинные строки. Но вот что нам хотелось бы получить:

    Мы~рассматриваем крмпактификацию счётного дискретного пространства~$N$. Наибольшее внимание исследователей в~теории бикомпактных расширений было уделено компактификации Стоуна--Чеха счётного дискретного пространства "---~$\beta N$ или~$\beta\omega$. История исследования этого пространства напрямую связана с~различением или классификацией точек нароста.

    Одним из~первых встал вопрос о~существовании в~нём~$p$\nbr-точек и~не~$p$\nbr-точек. То, что в~$\beta\omega$ есть не~$p$\nbr-точки "--- очевидно. В~1956~году Волтер Рудин доказывает существование~$p$\nbr-точек в~предположении \emph{CH}. Далее удалось ослабить это требование до~предположения \emph{AM}. Но~попытки доказать «наивно» существование~$p$\nbr-точек оканчивались неудачами. Позже, в~1978\,г. Шелахом было доказано, что «наивно» этот факт доказать невозможно. Это~обострило интерес к~изучению точек, так или иначе близких к~$p$\nbr-точкам.

Удаление лишних переносов
-------------------------

Основной особенностью алгоритма является определение контекста. Таким образом задаются различные правила для различных контекстов. Например, в области текста удаляются лишние переносы строк, что позволяет правильнее расставлять неразрывные пробелы и тонкие шпации. При этом внутри окружения `equation` переносы не меняются.
